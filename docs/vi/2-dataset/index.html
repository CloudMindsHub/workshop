<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.121.1">
    <meta name="description" content="">
<meta name="author" content="npnam.techii@gmail.com">

    <link rel="icon" href="https://cloudmindshub.github.io/workshop/images/favicon.png" type="image/png">

    <title>Chuẩn bị dataset :: Thiết lập AWS Account</title>

    
    <link href="https://cloudmindshub.github.io/workshop/css/nucleus.css?1745417658" rel="stylesheet">
    <link href="https://cloudmindshub.github.io/workshop/css/fontawesome-all.min.css?1745417658" rel="stylesheet">
    <link href="https://cloudmindshub.github.io/workshop/css/hybrid.css?1745417658" rel="stylesheet">
    <link href="https://cloudmindshub.github.io/workshop/css/featherlight.min.css?1745417658" rel="stylesheet">
    <link href="https://cloudmindshub.github.io/workshop/css/perfect-scrollbar.min.css?1745417658" rel="stylesheet">
    <link href="https://cloudmindshub.github.io/workshop/css/auto-complete.css?1745417658" rel="stylesheet">
    <link href="https://cloudmindshub.github.io/workshop/css/atom-one-dark-reasonable.css?1745417658" rel="stylesheet">
    <link href="https://cloudmindshub.github.io/workshop/css/theme.css?1745417658" rel="stylesheet">
    <link href="https://cloudmindshub.github.io/workshop/css/hugo-theme.css?1745417658" rel="stylesheet">
    
    <link href="https://cloudmindshub.github.io/workshop/css/theme-workshop.css?1745417658" rel="stylesheet">
    
    

    <script src="https://cloudmindshub.github.io/workshop/js/jquery-3.3.1.min.js?1745417658"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="https://cloudmindshub.github.io/workshop/vi/2-dataset/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://cloudmindshub.github.io/workshop/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="https://cloudmindshub.github.io/workshop/js/lunr.min.js?1745417658"></script>
<script type="text/javascript" src="https://cloudmindshub.github.io/workshop/js/auto-complete.js?1745417658"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/cloudmindshub.github.io\/workshop\/\/vi";
    
</script>
<script type="text/javascript" src="https://cloudmindshub.github.io/workshop/js/search.js?1745417658"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-introduce/" title="Giới thiệu" class="dd-item 
        
        
        
        ">
      <a href="https://cloudmindshub.github.io/workshop/vi/1-introduce/">
          <b>1. </b>Giới thiệu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-dataset/" title="Chuẩn bị dataset" class="dd-item 
        
        active
        
        ">
      <a href="https://cloudmindshub.github.io/workshop/vi/2-dataset/">
          <b>2. </b>Chuẩn bị dataset
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3-train/" title="Fine-tuning" class="dd-item 
        
        
        
        ">
      <a href="https://cloudmindshub.github.io/workshop/vi/3-train/">
          <b>3. </b>Fine-tuning
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/4-evaluation/" title="Đánh giá mô hình" class="dd-item 
        
        
        
        ">
      <a href="https://cloudmindshub.github.io/workshop/vi/4-evaluation/">
          <b>4. </b>Đánh giá mô hình
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/5-clean/" title="Dọn tài nguyên" class="dd-item 
        
        
        
        ">
      <a href="https://cloudmindshub.github.io/workshop/vi/5-clean/">
          <b>5. </b>Dọn tài nguyên
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h4>More</h4>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj"><i class='fab fa-facebook'></i> FCJ AWS</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="https://cloudmindshub.github.io/workshop/2-dataset/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="https://cloudmindshub.github.io/workshop/vi/2-dataset/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830891&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://www.linkedin.com/company/105900568/admin/dashboard/">Cloudminds</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total Cloudminds" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>04/04/2025</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i>
                <a href="https://www.linkedin.com/in/viet-hoang-b24b00317/"  style="color:orange">Hoàng Việt</a><br>
                <a href="https://www.linkedin.com/in/np-2708-nam/"  style="color:orange">Nam P. Nguyen</a><br>
                <a href="https://www.linkedin.com/in/anhdung/"  style="color:orange">Dung Ha Anh</a><br>
            </i>
            
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='https://cloudmindshub.github.io/workshop/vi/'>Customizing Amazon Nova models</a> > Chuẩn bị dataset
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#tổng-quan-về-bộ-dữ-liệu">Tổng quan về bộ dữ liệu</a></li>
        <li><a href="#tiền-xử-lý-dữ-liệu">Tiền xử lý dữ liệu</a></li>
        <li><a href="#định-dạng-dữ-liệu-theo-format-aws-bedrock">Định dạng dữ liệu theo format AWS Bedrock</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Chuẩn bị dataset
            </h1>
          

        



	<h3 id="tổng-quan-về-bộ-dữ-liệu">Tổng quan về bộ dữ liệu</h3>
<p>Bộ dữ liệu này là phần mở rộng của dự án Viet-Doc VAQ, được xây dựng từ 64.765 trang tài liệu giáo dục tiếng Việt 🇻🇳, bao gồm: sách bài tập, sách chuyên đề, giáo án từ các nhà xuất bản chính thống như Bộ Giáo dục &amp; Đào tạo, Cánh Diều, Chân Trời Sáng Tạo, Kết Nối Tri Thức,&hellip; phủ rộng tất cả các môn học từ lớp 1 đến lớp 12.</p>
<p>Mỗi trang tài liệu đã được xử lý và chú thích kỹ lưỡng bằng các kỹ thuật Visual Question Answering (VQA), tạo nên một bộ dữ liệu có chất lượng cao và giàu thông tin.</p>
<p>Bộ dữ liệu bao gồm 388.277 cặp mô tả chi tiết và câu hỏi - trả lời theo ngữ cảnh, được tự động tạo ra bởi Gemini 1.5 Flash – mô hình AI hàng đầu của Google, đang dẫn đầu bảng xếp hạng WildVision Arena. Nhờ đó, đây là nguồn tài nguyên lý tưởng cho các mục tiêu nghiên cứu và ứng dụng giáo dục hiện đại.</p>
<p>Các môn học bao gồm: Toán học 📐, Ngữ văn 📚, Tiếng Anh 🇬🇧, Vật lý ⚛️, Hóa học 🧪, Sinh học 🌱, Lịch sử 📜, Địa lý 🌍, Giáo dục công dân 🏫, Tin học 💻, Công nghệ 🛠️, Âm nhạc 🎵, Mỹ thuật 🎨, Thể dục ⚽,&hellip;</p>
<p>Vì chi phí có giới hạn, chỉ để thử nghiệm việc fine-tuning mô hình trên AWS Bedrock, trong workshop này chỉ dùng 100 mẫu dữ liệu để huấn luyện (số lượng mẫu tối thiểu theo yêu cầu của Bedrock ).</p>
<h3 id="tiền-xử-lý-dữ-liệu">Tiền xử lý dữ liệu</h3>
<ul>
<li>Tải dữ liệu từ Hugging Face: <a href="https://huggingface.co/datasets/5CD-AI/Viet-Doc-VQA-II/tree/main/data">https://huggingface.co/datasets/5CD-AI/Viet-Doc-VQA-II/tree/main/data</a></li>
</ul>
<p><img src="https://cloudmindshub.github.io/workshop/images/2-dataset/data-hf.png" alt="Architecture"></p>
<ul>
<li>Nhập thư viện cần thiết</li>
</ul>
<pre tabindex="0"><code>import os
import ast
import csv
import json
import numpy as np
import pandas as pd
from sklearn.model_selection import train_test_split
</code></pre><ul>
<li>Đọc file parquet thành Dataframe</li>
</ul>
<pre tabindex="0"><code>df = pd.read_parquet(&#39;train-00000-of-00034.parquet&#39;, engine=&#34;pyarrow&#34;)

df[&#39;conversations&#39;] = df[&#39;conversations&#39;].apply(
    lambda x: json.dumps(x.tolist(), ensure_ascii=False) if isinstance(x, np.ndarray) else json.dumps(x, ensure_ascii=False)
)

df = df.head(100)
</code></pre><ul>
<li>Chia dữ liệu thành 3 bộ train (90%), test (10%)</li>
</ul>
<pre tabindex="0"><code># Chia tập train (90%) và tập test (10%)
train_df, test_df = train_test_split(df, test_size=0.1)

train_df.to_csv(&#34;viet_vqa_train.csv&#34;, index=False, encoding=&#39;utf-8&#39;)
test_df.to_csv(&#34;viet_vqa_test.csv&#34;, index=False, encoding=&#39;utf-8&#39;)

df_train = pd.read_csv(&#39;viet_vqa_train.csv&#39;)
df_test = pd.read_csv(&#39;viet_vqa_test.csv&#39;)
</code></pre><p>-&raquo;&raquo;&raquo;&raquo;&raquo;&raquo;&raquo;&raquo;&gt;1 tấm hình chỗ này show console số lượng dữ liệu</p>
<h3 id="định-dạng-dữ-liệu-theo-format-aws-bedrock">Định dạng dữ liệu theo format AWS Bedrock</h3>
<ul>
<li>Định dạng mẫu của AWS Bedrock</li>
</ul>
<pre tabindex="0"><code>item = {
    &#34;schemaVersion&#34;: &#34;bedrock-conversation-2024&#34;,
    &#34;system&#34;: [
        {
            &#34;text&#34;: (
                &#34;You are an AI assistant specialized in Q&amp;A based on Vietnamese images. &#34;
                &#34;You can analyze image content, recognize text (OCR), understand context, &#34;
                &#34;and answer questions based on extracted information. &#34;
                &#34;Behavior Guidelines Text Recognition: Use OCR to extract textual content from images. &#34;
                &#34;Context Understanding: Identify the meaning of the extracted text and image to provide accurate answers. &#34;
                &#34;Concise Responses: Provide clear, precise, and natural Vietnamese responses. &#34;
                &#34;Image Analysis Support: If a question requires more than text extraction, analyze the visual content as well. &#34;
                &#34;Professional &amp; Objective: Respond factually based on the image, avoiding assumptions beyond the given data.&#34;
            )
        }
    ],
    &#34;messages&#34;: [
        {
            &#34;role&#34;: &#34;user&#34;,
            &#34;content&#34;: [
                {&#34;text&#34;: &#34;&#34;},
                {
                    &#34;image&#34;: {
                        &#34;format&#34;: &#34;png&#34;,
                        &#34;source&#34;: {
                            &#34;s3Location&#34;: {
                                &#34;uri&#34;: &#34;s3://test-fineture-novalite/data-fineture/image_sample_1.jpg&#34;,
                                &#34;bucketOwner&#34;: &#34;536*********&#34;
                            }
                        }
                    }
                }
            ]
        },
        {
            &#34;role&#34;: &#34;assistant&#34;,
            &#34;content&#34;: [
                {&#34;text&#34;: &#34;&#34;}
            ]
        }
    ]
}
</code></pre><ul>
<li>Hàm định dạng dữ liệu, thông điêp đầu tiên của role user sẽ chứa thêm hình ảnh, kết hợp với các thông điệp trong mẫu dữ liệu tạo ra 1 conversation.</li>
</ul>
<pre tabindex="0"><code>def create_jsonl_item(row):
    try:
        conversations = row.get(&#34;conversations&#34;)
        json_conversation = json.loads(conversations)

        for item in json_conversation:
            if isinstance(item[&#34;content&#34;], str):
                item[&#34;content&#34;] = [{&#34;text&#34;: item[&#34;content&#34;]}]

        message_id = row.get(&#34;id&#34;)
        if isinstance(conversations, str):
            conversations = json.loads(conversations)
            
        if not isinstance(conversations, list):
            raise ValueError(&#34;Invalid JSON format in conversations column&#34;)

        if len(json_conversation) &gt; 0 and json_conversation[0][&#34;role&#34;] == &#34;user&#34;:
            image_info = {
                &#34;image&#34;: {
                    &#34;format&#34;: &#34;png&#34;,
                    &#34;source&#34;: {
                        &#34;s3Location&#34;: {
                            &#34;uri&#34;: f&#34;s3://data-vqa-fine-tune-nova/train/image_{message_id}.png&#34;,
                            &#34;bucketOwner&#34;: &#34;536*********&#34;
                        }
                    }
                }
            }
            content_user = json_conversation[0][&#34;content&#34;]
            content_user.append(image_info)
            json_conversation[0][&#34;content&#34;] = content_user
        print(json_conversation)
        return {
            &#34;schemaVersion&#34;: &#34;bedrock-conversation-2024&#34;,
            &#34;system&#34;: [
                {
                    &#34;text&#34;: (
                        &#34;You are an AI assistant specialized in Q&amp;A based on Vietnamese images. &#34;
                        &#34;You can analyze image content, recognize text (OCR), understand context, &#34;
                        &#34;and answer questions based on extracted information. &#34;
                        &#34;Behavior Guidelines Text Recognition: Use OCR to extract textual content from images. &#34;
                        &#34;Context Understanding: Identify the meaning of the extracted text and image to provide accurate answers. &#34;
                        &#34;Concise Responses: Provide clear, precise, and natural Vietnamese responses. &#34;
                        &#34;Image Analysis Support: If a question requires more than text extraction, analyze the visual content as well. &#34;
                        &#34;Professional &amp; Objective: Respond factually based on the image, avoiding assumptions beyond the given data.&#34;
                    )
                }
            ],
            &#34;messages&#34;: json_conversation
        }
    except Exception as e:
        print(f&#34;Lỗi khi xử lý conversations: {e}, row conversation: {conversations}&#34;)
        return None
</code></pre><ul>
<li>Đọc dữ liệu train từ file <strong>viet_vqa_train.csv</strong></li>
</ul>
<pre tabindex="0"><code>df_train = pd.read_csv(&#39;viet_vqa_train.csv&#39;)
df_train
</code></pre><ul>
<li>Chuyển đổi hình ảnh dạng bytes thành file png và lưu trong một folder để upload lên s3 bucket.</li>
</ul>
<pre tabindex="0"><code>output_folder = &#39;train_images&#39;

if not os.path.exists(output_folder):
    os.makedirs(output_folder)

for idx, row in df_train.iterrows():
    try:
        image_bytes = eval(row[&#39;image&#39;])
        image_data = image_bytes[&#39;bytes&#39;] if isinstance(image_bytes, dict) else image_bytes

        img = Image.open(io.BytesIO(image_data))

        file_path = os.path.join(output_folder, f&#39;image_{idx}.png&#39;)

        img.save(file_path, format=&#39;PNG&#39;)

        print(f&#34;Đã lưu ảnh: {file_path}&#34;)
    except Exception as e:
        print(f&#34;Lỗi khi xử lý ảnh ở dòng {idx}: {e}&#34;)
</code></pre><ul>
<li>Apply cho cả Dataframe</li>
</ul>
<pre tabindex="0"><code>jsonl_data = df_train.apply(create_jsonl_item, axis=1).tolist()
</code></pre><ul>
<li>Lưu lại thành file jsonl</li>
</ul>
<pre tabindex="0"><code>jsonl_data = [item for item in jsonl_data if item is not None]

with open(&#34;data_train_90.jsonl&#34;, &#34;w&#34;, encoding=&#34;utf-8&#34;) as f:
    for item in jsonl_data:
        json.dump(item, f, ensure_ascii=False)
        f.write(&#34;\n&#34;)
</code></pre>
<div class="notices note" ><p>Tương tự như cách làm của bộ dữ liệu train, ta sẽ áp dụng cho file <strong>viet_vqa_test.csv</strong>.</p>
</div>

<ul>
<li>Upload tất cả lên s3. Ta được cấu trúc bộ dữ liệu trên s3 như hình bên dưới.</li>
</ul>
<p><img src="https://cloudmindshub.github.io/workshop/images/2-dataset/s3_dataset.png" alt="S3-Dataset"></p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="https://cloudmindshub.github.io/workshop/vi/1-introduce/" title="Giới thiệu"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="https://cloudmindshub.github.io/workshop/vi/3-train/" title="Fine-tuning" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://cloudmindshub.github.io/workshop/js/clipboard.min.js?1745417658"></script>
    <script src="https://cloudmindshub.github.io/workshop/js/perfect-scrollbar.min.js?1745417658"></script>
    <script src="https://cloudmindshub.github.io/workshop/js/perfect-scrollbar.jquery.min.js?1745417658"></script>
    <script src="https://cloudmindshub.github.io/workshop/js/jquery.sticky.js?1745417658"></script>
    <script src="https://cloudmindshub.github.io/workshop/js/featherlight.min.js?1745417658"></script>
    <script src="https://cloudmindshub.github.io/workshop/js/highlight.pack.js?1745417658"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://cloudmindshub.github.io/workshop/js/modernizr.custom-3.6.0.js?1745417658"></script>
    <script src="https://cloudmindshub.github.io/workshop/js/learn.js?1745417658"></script>
    <script src="https://cloudmindshub.github.io/workshop/js/hugo-learn.js?1745417658"></script>

    <link href="https://cloudmindshub.github.io/workshop/mermaid/mermaid.css?1745417658" rel="stylesheet" />
    <script src="https://cloudmindshub.github.io/workshop/mermaid/mermaid.js?1745417658"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
